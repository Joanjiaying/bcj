<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title></title>
<link rel="stylesheet" type="text/css" href="../css/index.css">
<link rel="stylesheet" href="../css/list.css" />
</head>
<body>
<div id="top1">
  <aside>
	  <ul>
	  	<li><a href="de-re.html">请登录</a></li>
	  	<li><a href="de-re.html">注册</a></li>
	  </ul>
	  <span>忘记密码，</span>
	  <a href="#"><b>立即找回</b></a>
  </aside>
  <article>
  	<ul>
  		<li><a>我的零食</a></li>
  		<li><a>客户服务</a><i class=""></i></li>
  		<li class="noany">服务热线：</li>
  	</ul>
  	<span>0571-5658825</span>
  </article> 
 </div>
 <div id="top2">
	 <a><img src="../img/logo.png"/>	</a>
	 <h2>趣味零食探索家</h2>
	 <div class="search">
	 	<input type="text" value="芒果干" id="txt1"/>
	 	<input type="button" value="搜  索" id="t1_btn1"/>
	 </div> 
	 <div class="car">
	 	<i class=""></i>
	 	<a>购物车<span>0</span>件</a>
	 </div>
 </div>
 <nav>
	<div class="navl">
	  	<li>所有零食分类<i class=""></i>
	  		<ol>
	  			<li>健康坚果<i class=""></i>
	  			   <ul>
	  			   	 <li><a href="daikejianguo.html">带壳坚果</a>
	  			   	     <ul>
	  			   	     	<li>薄皮核桃</li>
	  			   	     	<li>枣核桃</li>
	  			   	     	<li>大核桃</li>
	  			   	     </ul> 
	  			   	 </li>
	  			   	 <li>健康果仁</li>
	  			   	 <li>休闲小吃</li>
	  			   	 <div class="gj">
	  			   	 	<h3>热搜关键字：</h3>
	  			   	 	<ul>
	  			   	 		<li><a href="">碧根果</a></li>
	  			   	 		<li>牛肉干</li>
	  			   	 		<li>核桃</li>
	  			   	 		<li>芒果干</li>
	  			   	 		<li>新疆红枣</li>
	  			   	 	</ul>
	  			   	 	<div>
	  			   	 	<img src="../img/rs.jpg" />
	  			   	 	<img src="../img/rs2.jpg" />
	  			   	 	</div>
	  			   	 </div>
	  			   </ul>
	  			</li>
	  			<li>肉食王国<i class=""></i></li>
	  			<li>果干乐园<i class=""></i></li>
	  			<li>甜蜜糕点<i class=""></i></li>
	  			<li>新疆特产<i class=""></i></li>
	  			<li>精美礼盒<i class=""></i></li>
	  		</ol>
	  	</li>
	</div>
	<ul class="navr">
		<li><a href="">首页<i class=""></i></a></li>
		<li><a href="">年货礼盒<i class=""></i></a></li>
		<li><a href="">提货卡<i class=""></i></a></li>
		<li><a href="">新品首发<i class=""></i></a></li>
		<li><a href="">品牌故事<i class=""></i></a></li>
		<li><a href="">找回密码<i class=""></i></a></li>
	</ul>
	<h3>BAICAOWEI</h3>
 </nav>	
 <div id="list-box">
 	<h4>首页>购物车</h4>
 	<div class="list">
 		<ul>
 			<li> 
 				<i class=""></i>
 				<span>查看购物车</span>
 				<s class=""></s>
 			</li>
 			<li> 
 				<i class=""></i>
 				<span>确认订单信息并支付</span>
 				<s class=""></s>
 			</li>
 			<li> 
 				<i class=""></i>
 				<span>确认收获</span>
 				<s class=""></s>
 			</li>
 			<li> 
 				<i class=""></i>
 				<span>评价</span>
 			</li>
 		</ul>	
 		<table>
			<thead>
				<tr>
					<td><input type="checkbox" class="selectall">全选</td>
					<td>商品信息</td>
					<td>单价</td>
					<td>数量</td>
					<td>金额</td>
					<td>操作</td>
				</tr>
			</thead>
	        <tbody id="tbody1"></tbody>
       </table>
       <div class="huizong">
	       <input type="checkbox" id="allcheck"/>全选
	       <span class="">清空</span>
	       <b>移入收藏夹</b>
	       <span>分享到：</span>  
	       <a><i class=""></i>  </a>
	       <p>已选商品<span>0</span>件(不计运费)：</p>
	       <h4>¥<span id="gongji"></span>元</h4>
       </div>
       <div class="listb">
       	  <a href="daikejianguo.html"><input type="button" value="<继续购物" id="btnl"/></a>
       	  <a href="#"><input type="button" value="结算>" id="btnr"/></a>
       </div>
 	</div>
 </div>
 <div id="foot">
 <ul>
 	<li><img src="../img/f1.jpg"></li>
 	<li><img src="../img/f1.jpg"></li>
 	<li><img src="../img/f1.jpg"></li>
 	<li><img src="../img/f1.jpg"></li>
 	<li><img src="../img/f1.jpg"></li>
 	<li><img src="../img/f1.jpg"></li>
 </ul>
</div>
<footer>
  <ul>
  	<li>
  		<dl>
  			<dt><img src="../img/f2.jpg"/></dt>
  			<dd>
  				<h5>正品保障</h5>
  				<p>品牌直销 品质保证</p>
  			</dd>
  		</dl>
  	</li>
  	<li>
  		<dl>
  			<dt><img src="../img/f2.jpg"/></dt>
  			<dd>
  				<h5>正品保障</h5>
  				<p>品牌直销 品质保证</p>
  			</dd>
  		</dl>
  	</li>
  	<li>
  		<dl>
  			<dt><img src="../img/f2.jpg"/></dt>
  			<dd>
  				<h5>正品保障</h5>
  				<p>品牌直销 品质保证</p>
  			</dd>
  		</dl>
  	</li>
  	<li>
  		<dl>
  			<dt><img src="../img/f2.jpg"/></dt>
  			<dd>
  				<h5>正品保障</h5>
  				<p>品牌直销 品质保证</p>
  			</dd>
  		</dl>
  	</li>
  	<li>
  		<dl>
  			<dt><img src="../img/f2.jpg"/></dt>
  			<dd>
  				<h5>正品保障</h5>
  				<p>品牌直销 品质保证</p>
  			</dd>
  		</dl>
  	</li>
  	<li>
  		<dl>
  			<dt><img src="../img/f2.jpg"/></dt>
  			<dd>
  				<h5>正品保障</h5>
  				<p>品牌直销 品质保证</p>
  			</dd>
  		</dl>
  	</li>
  </ul>
  <div class="zhidu">
  	<li>
  		<ul>
	  		<li class="no1">新手指南</li>
	  		<li>会员制度</li>
	  		<li>注册协议</li>
	  		<li>购物流程</li>
  		</ul>
  	</li>
  	<li>
  		<ul>
	  		<li class="no1">新手指南</li>
	  		<li>会员制度</li>
	  		<li>注册协议</li>
	  		<li>购物流程</li>
  		</ul>
  	</li>
  	<li>
  		<ul>
	  		<li class="no1">新手指南</li>
	  		<li>会员制度</li>
	  		<li>注册协议</li>
	  		<li>购物流程</li>
  		</ul>
  	</li>
  	<li>
  		<ul>
	  		<li class="no1">新手指南</li>
	  		<li>会员制度</li>
	  		<li>注册协议</li>
	  		<li>购物流程</li>
  		</ul>
  	</li>
  	<li>
  		<ul>
	  		<li class="no1">新手指南</li>
	  		<li>会员制度</li>
	  		<li>注册协议</li>
	  		<li>购物流程</li>
  		</ul>
  	</li>
  </div>
  <div class="bot">
  <ul>
  	<li>首页</li>
  	<li>品牌简介</li>
  	<li>品牌简介</li>
  	<li>品牌简介</li>
  	<li>品牌简介</li>
  </ul>
  </div>
</footer>
<script type="text/javascript" src="../js/jquery-1.11.3.js" ></script> 
<script type="text/javascript" src="../js/index.js" ></script>
<script type="text/javascript" src="../js/cookie.js" ></script>
<script>
var template =``;
var zong = 0;
for(var i=1; i<13; i++){
var obj = getCookie(""+i);
	if(obj!=undefined){
		fn(obj);
	tbody1.innerHTML =template;
	zong += Number((obj[0]*obj[2]).toFixed(2));    
  console.log((obj[0]*obj[2]).toFixed(2)); 
	}gongji.innerHTML = zong;
}
function fn(arr){
   template +=`<tr>
	  <td style="position:relative;">
	      <input class="checks" type="checkbox" style="position:absolute;top:40px" >
	      <img src='${arr[1]}' style="width:100px;border:1px solid #999;margin-left:20px"/>
	  </td>
	  <td>${arr[3]}</td>
	  <td>¥${arr[2]}元</td>
	  <td>
	    <input type="button" value="-">
	    <input type="text" value="${arr[0]}" class="txt">
	    <input type="button" value="+">
	  </td>
	  <td>¥${(arr[2]*arr[0]).toFixed(2)}元</td>
	  <td><button>移除</button></td>
	</tr>`
}	

tbody1.onclick = function(e){
	var el = e.target;
	if(el.nodeName == "INPUT"){
		if(el.value == "-"){
			var td = el.parentNode;
			var zj = td.nextElementSibling;
			var dj = td.previousElementSibling;
			var inpNum = el.nextElementSibling;
			inpNum.value--;
		    zj.innerHTML = "¥"+parseFloat(dj.innerHTML.replace('¥',''))*inpNum.value+"元";
		    if (inpNum.value<0) {
		    	   removeCookie(""+i);
		    	   tbody1.removeChild(td.parentNode);
		    }else{
		    	   var obj = getCookie(""+i);
		    	   num = inpNum.value;
		    	   setCookie(""+i,num,2);
		    }
		}
		if(el.value == "+"){
			var td = el.parentNode;
			var zj = td.nextElementSibling;
			var dj = td.previousElementSibling;
			var inpNum = el.previousElementSibling;
			inpNum.value++;
			zj.innerHTML = "¥"+parseFloat(dj.innerHTML.replace('¥',''))*inpNum.value+"元";
			var obj = getCookie();
			console.log(""+i,obj)
		    	num = inpNum.value;
		    	setCookie(i,num,2); 
		}
	}
	if(el.nodeName == "BUTTON"){
			var td = el.parentNode;	
		    var r = confirm("您是否确认移除？");
   	        if(r){
			  removeCookie(""+i);
			  tbody1.removeChild(td.parentNode);
			}
		}
}
var flag = true;
allcheck.onclick = function(){
	var ac = document.querySelector("#allcheck");
	var cks = document.querySelectorAll(".checks");
	if(ac.checked==flag){
	    for(var i=0;i<cks.length;i++){
	            cks[i].checked=flag;
	        }
	}else{
		for(var i=0;i<cks.length;i++){
	            cks[i].checked=false;
	        }
	}
}
</script>
</body>
</html>
